# Архитектуры вычислительных систем. ИДЗ № 2. Вариант 34 <br/> Нарин Алексей БПИ217.
## Использование программы:
1. Если вы хотите вводить строки вручную - запускайте программу без аргументов. В таком случае недоступно использование символа \n, он является разграничителем строк.
```
/program.exe -f
```
![image](https://user-images.githubusercontent.com/44980361/201536805-3ffdf836-1a76-46fd-8919-f29d86c42920.png)



2. Если вы хотите использовать ввод из файлов, вам следует запускать с флагом -f:
```
/program.exe -f
```
Длина строк ограничена лишь памятью, выделенной под программу. Требуемые названия файлов для ввода-вывода:
* input.txt - файл, содержащий первую "строку".
* input2.txt - файл, содержащий вторую "строку".
* output.txt - файл, будет содержать объединение строк без повторений символов.
Файлы следует поместить в одну папку с исполняемым файлом, либо на один уровень выше.

3. Если же вы хотите протестировать ввод строк с помощью параметров командной строки, вводите их через пробел.
```
./program.exe ILovePiZ*zA lolKEKchebur123123_%%
```
Разумеется, набор возможных символов при таком вводе ограничен возможностями аргументов командной строки, такими как запрет пробельных символов, &, скобок и других символов, задействованных в терминале Linux.

# Отчёт о выполненных модификациях.

*(Во всех трех файлах main.s, input.s, combination.s)*

### Удалены макросы:
``` assembly
cdqe
endbr64
```

### Удалены строки с мета информацией, не влияющие на выполнение программы.
``` assembly
.size	combination, .-combination
	.ident	"GCC: (Ubuntu 9.3.0-10ubuntu2) 9.3.0"
	.section	.note.GNU-stack,"",@progbits
	.section	.note.gnu.property,"a"
	.align 8
	.long	 1f - 0f
	.long	 4f - 1f
	.long	 5
0:
	.string	 "GNU"
1:
	.align 8
	.long	 0xc0000002
	.long	 3f - 2f
2:
	.long	 0x3
3:
	.align 8
4:

```
### Оптимизация регистров
Вручную заменил часто используемые переменные, перенеся их со стэка на регистры. 
В файле combination таким образом перенёс i со стека в r12d, а j - со стека в r13d
Помимо этого, оптимизировал ситуации, где rax выступал в роли ненужного посредника для данных, которые требовалось снять со стека чтобы к примеру передать аргументом через rdi. Пример на картинках 
``` assembly
mov  rax, QWORD PTR -72[rbp]
mov  rdi, rax
превращается в
mov  rdi, QWORD PTR -72[rbp]
```




